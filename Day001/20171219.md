=====STEP5=====
https://docs.hortonworks.com/HDPDocuments/Ambari-2.6.0.0/bk_ambari-installation/content/ch_working-with-mpacks.html
Management packs allow you to deploy a range of services to your Ambari-managed cluster. You can use a management pack to deploy a specific component or service, or to deploy an entire platform, like HDF.

In general, when working with management packs, you perform the following tasks in this order:

Install the management pack.

Update the repository URL in Ambari.

Start the Ambari Server.

Launch the Ambari Installation Wizard.

=====STEP4=====
https://docs.hortonworks.com/HDPDocuments/Ambari-2.6.0.0/bk_ambari-installation/content/setup_options.html


Setup Options
The following options are frequently used for Ambari Server setup.

-j (or --java-home)
Specifies the JAVA_HOME path to use on the Ambari Server and all hosts in the cluster. By default when you do not specify this option, Ambari Server setup downloads the Oracle JDK 1.8 binary and accompanying Java Cryptography Extension (JCE) Policy Files to /var/lib/ambari-server/resources. Ambari Server then installs the JDK to /usr/jdk64.

Use this option when you plan to use a JDK other than the default Oracle JDK 1.8. If you are using an alternate JDK, you must manually install the JDK on all hosts and specify the Java Home path during Ambari Server setup. If you plan to use Kerberos, you must also install the JCE on all hosts.

This path must be valid on all hosts. For example:

ambari-server setup â€“j /usr/java/default
--jdbc-driver
Should be the path to the JDBC driver JAR file. Use this option to specify the location of the JDBC driver JAR and to make that JAR available to Ambari Server for distribution to cluster hosts during configuration. Use this option with the --jdbc-db option to specify the database type.

--jdbc-db
Specifies the database type. Valid values are: [postgres | mysql | oracle] Use this option with the --jdbc-driver option to specify the location of the JDBC driver JAR file.

-s (or --silent)
Setup runs silently. Accepts all the default prompt values, such as:

User account "root" for the ambari-server

Oracle 1.8 JDK (which is installed at /usr/jdk64). This can be overridden by adding the -j option and specifying an existing JDK path.

Embedded PostgreSQL for Ambari DB (with database name "ambari")

[Important]	Important
By choosing the silent setup option and by not overriding the JDK selection, Oracle JDK will be installed and you will be agreeing to the Oracle Binary Code License agreement.

Do not use this option if you do not agree to the license terms.

If you want to run the Ambari Server as non-root, you must run setup in interactive mode. When prompted to customize the ambari-server user account, provide the account information.

-v (or --verbose)
Prints verbose info and warning messages to the console during Setup.

-g (or --debug)
Prints debug info to the console during Setup.

More Information

JDK Requirements


=====STEP3=====

READ BEFORE
https://community.hortonworks.com/questions/59690/cant-authenticate-user-ambari-in-ambari-server-set.html

This is how I configured my /var/lib/pgsql/data/pg_hba.conf file:


`
local 	all 	all 	peer
host 	all 	all 	127.0.0.1/32 	ident

local  	all  	ambari 	md5
host  	all   	ambari 	0.0.0.0/0  	md5
host  	all   	ambari 	::/0 		md5
host	oozie	oozie	<my-host-ip>/0	md5
host	hive	hive	<my-host-ip>/0	md5

ambari-server setup --jdbc-db=postgres --jdbc-driver=/usr/share/java/postgresql-jdbc.jar

ambari-server setup
`


Enter advanced database configuration [y/n]? y


`
...
Enter choice (1): 4
Hostname (localhost): <my-fqdn-host-name>
Port (5432):
Database name (ambari):
Postgres schema (ambari):
Username (ambari):
Enter Database Password (bigdata) : <my-ambari-password>
`


However, I can't start the ambari-server, as I get this from /var/log/ambari-server/ambari-server.log on a number of lines:

Internal Exception: org.postgresql.util.PSQLException: FATAL: Ident authentication failed for user "ambari"
Although I am sure that my password is correct, and I can even connect using


`
$ psql -h <my-fqdn-host-name> -U ambari -d ambari -W
password: <my-ambari-password>
$ psql -h <my-host-ip> -U ambari -d ambari -W
password: <my-ambari-password>
However, I can't connect with

$ psql -h localhost -U ambari -d ambari -W
password: <my-ambari-password>
psql: FATAL: Ident authentication failed for user "ambari"
$ psql -h 127.0.0.1 -U ambari -d ambari -W
password: <my-ambari-password>
psql: FATAL: Ident authentication failed for user "ambari"
`


And I get the same error as what I get from /var/log/ambari-server/ambari-server.log. I suspect that ambari-server setup is connecting via localhost, that's why I get the same error.

Can you tell what's wrong with my configuration with Ambari and/or Postgres?

DO NOW:
https://docs.hortonworks.com/HDPDocuments/Ambari-2.6.0.0/bk_ambari-installation/content/set_up_the_ambari_server.html
Set Up the Ambari Server
Before starting the Ambari Server, you must set up the Ambari Server. Setup configures Ambari to talk to the Ambari database, installs the JDK and allows you to customize the user account the Ambari Server daemon will run as. The

`
ambari-server setup
`


command manages the setup process. Run the following command on the Ambari server host to start the setup process. You may also append Setup Options to the command.


`
ambari-server setup
`


Respond to the setup prompt:

If you have not temporarily disabled SELinux, you may get a warning. Accept the default (y), and continue.

By default, Ambari Server runs under root. `Accept the default (n) at the Customize user account for ambari-server daemon prompt, to proceed as root.` If you want to create a different user to run the Ambari Server, or to assign a previously created user, select y at the Customize user account for ambari-server daemon prompt, then provide a user name.

If you have not temporarily disabled iptables you may get a warning. Enter y to continue.

Select a JDK version to download. `Enter 1 to download Oracle JDK 1.8.` Alternatively, you can choose to enter a Custom JDK. If you choose Custom JDK, you must manually install the JDK on all hosts and specify the Java Home path.

[Note]	Note
JDK support depends entirely on your choice of Stack versions. By default, Ambari Server setup downloads and installs Oracle JDK 1.8 and the accompanying Java Cryptography Extension (JCE) Policy Files.

`Accept the Oracle JDK license when prompted.` You must accept this license to download the necessary JDK from Oracle. The JDK is installed during the deploy phase.

`Select n at Enter advanced database configuration to use the default`, embedded PostgreSQL database for Ambari. The default PostgreSQL database name is ambari. The default user name and password are ambari/bigdata. Otherwise, to use an existing PostgreSQL, MySQL/MariaDB or Oracle database with Ambari, select y.

If you are using an existing PostgreSQL, MySQL/MariaDB, or Oracle database instance, use one of the following prompts:

[Important]	Important
You must prepare a non-default database instance, before running setup and entering advanced database configuration.

[Important]	Important
Using the Microsoft SQL Server or SQL Anywhere database options are not supported.

To use an existing Oracle instance, and select your own database name, user name, and password for that database, enter 2.

Select the database you want to use and provide any information requested at the prompts, including host name, port, Service Name or SID, user name, and password.

To use an existing MySQL/MariaDB database, and select your own database name, user name, and password for that database, enter 3.

Select the database you want to use and provide any information requested at the prompts, including host name, port, database name, user name, and password.

To use an existing PostgreSQL database, and select your own database name, user name, and password for that database, enter 4.

Select the database you want to use and provide any information requested at the prompts, including host name, port, database name, user name, and password.

At Proceed with configuring remote database connection properties [y/n] choose y.

Setup completes.

[Note]	Note
If your host accesses the Internet through a proxy server, you must configure Ambari Server to use this proxy server.



=====STEP2=====
https://docs.hortonworks.com/HDPDocuments/Ambari-2.6.0.0/bk_ambari-installation/content/install-ambari-server-ubuntu16.html

Ubuntu 16
On a server host that has Internet access, use a command line editor to perform the following:

Steps

Install the Ambari bits. This also installs the default PostgreSQL Ambari database.

`
apt-get install ambari-server
`


[Note]	Note
When deploying a cluster having limited or no Internet access, you should provide access to the bits using an alternative method.

Ambari Server by default uses an embedded PostgreSQL database. When you install the Ambari Server, the PostgreSQL packages and dependencies must be available for install. These packages are typically available as part of your Operating System repositories. Please confirm you have the appropriate repositories available for the postgresql-server packages.




===== STEP1 =====
https://docs.hortonworks.com/HDPDocuments/Ambari-2.6.0.0/bk_ambari-installation/content/download_the_ambari_repo_ubuntu16.html#dPQ3ty7Y



Ubuntu 16
On a server host that has Internet access, use a command line editor to perform the following:

Steps

Log in to your host as root.

Download the Ambari repository file to a directory on your installation host.


`
wget -O /etc/apt/sources.list.d/ambari.list http://public-repo-1.hortonworks.com/ambari/ubuntu16/2.x/updates/2.6.0.0/ambari.list
`


`
apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD
`


`
apt-get update
`


[Important]	Important
Do not modify the ambari.list file name. This file is expected to be available on the Ambari Server host during Agent registration.

Confirm that Ambari packages downloaded successfully by checking the package name list.


`
apt-cache showpkg ambari-server
`


`
apt-cache showpkg ambari-agent
`


`
apt-cache showpkg ambari-metrics-assembly
`



You should see the Ambari packages in the list.

[Note]	Note
When deploying a cluster having limited or no Internet access, you should provide access to the bits using an alternative method.

Ambari Server by default uses an embedded PostgreSQL database. When you install the Ambari Server, the PostgreSQL packages and dependencies must be available for install. These packages are typically available as part of your Operating System repositories. Please confirm you have the appropriate repositories available for the postgresql-server packages.

